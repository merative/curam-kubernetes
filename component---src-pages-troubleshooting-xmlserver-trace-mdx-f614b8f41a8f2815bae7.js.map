{"version":3,"file":"component---src-pages-troubleshooting-xmlserver-trace-mdx-f614b8f41a8f2815bae7.js","mappings":"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","sources":["webpack://curam-kubernetes/./src/pages/troubleshooting/xmlserver-trace.mdx"],"sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsxRuntime classic */\n/* @jsx mdx */\nimport DefaultLayout from \"/home/runner/work/curam-kubernetes/curam-kubernetes/node_modules/gatsby-theme-carbon/src/templates/Default.js\";\nexport const _frontmatter = {};\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n  return <div {...props} />;\n};\nconst InlineNotification = makeShortcode(\"InlineNotification\");\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <h2>{`Introduction`}</h2>\n    <p>{`This topic describes how to configure XML server tracing when deployed to Kubernetes.`}</p>\n    <p>{`For more information about XML server tracing, see `}<strong parentName=\"p\">{`Debug configuration`}</strong>{` in the `}<em parentName=\"p\">{`Cúram XML Infrastructure Guide`}</em>{`.`}</p>\n    <InlineNotification mdxType=\"InlineNotification\">\n      <p>{`Cúram PDF documentation is available to download from `}<a parentName=\"p\" {...{\n          \"href\": \"https://curam-spm-devops.github.io/wh-support-docs/spm/pdf-documentation/\"\n        }}>{`Cúram Support Docs`}</a>{`.`}</p>\n    </InlineNotification>\n    <p>{`However, to use it in a Kubernetes environment, the following steps will need to be performed:`}</p>\n    <ol>\n      <li parentName=\"ol\">{`Create a new ConfigMap to override the trace setting in the default `}<inlineCode parentName=\"li\">{`xmlserverconfig.xml.template`}</inlineCode>{` file`}</li>\n      <li parentName=\"ol\">{`Optionally (for the `}<inlineCode parentName=\"li\">{`xmlserver`}</inlineCode>{` deployment only), a ConfigMap can be created to override its default log4j properties file.`}</li>\n    </ol>\n    <p>{`The Kubernetes commands presented in this topic are generic and assume a helm release name of `}<inlineCode parentName=\"p\">{`releasename`}</inlineCode>{`.\nTo enter the commands below as-is, `}<inlineCode parentName=\"p\">{`<name_space>`}</inlineCode>{` will need to be substituted with the OpenShift project name or AKS namespace for the deployment:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`For Openshift:`}\n        <ul parentName=\"li\">\n          <li parentName=\"ul\">{`Create an alias for the `}<inlineCode parentName=\"li\">{`oc`}</inlineCode>{` command:`}\n            <ul parentName=\"li\">\n              <li parentName=\"ul\">{`Bash: `}<inlineCode parentName=\"li\">{`alias k='oc'`}</inlineCode></li>\n              <li parentName=\"ul\">{`Windows PowerShell: `}<inlineCode parentName=\"li\">{`Set-Alias -Name k -Value oc`}</inlineCode></li>\n            </ul>\n          </li>\n          <li parentName=\"ul\">{`Set the default namespace:`}\n            <ul parentName=\"li\">\n              <li parentName=\"ul\"><inlineCode parentName=\"li\">{`k project <name_space>`}</inlineCode></li>\n            </ul>\n          </li>\n        </ul>\n      </li>\n      <li parentName=\"ul\">{`For AKS:`}\n        <ul parentName=\"li\">\n          <li parentName=\"ul\">{`Create an alias for the `}<inlineCode parentName=\"li\">{`kubectl`}</inlineCode>{` command:`}\n            <ul parentName=\"li\">\n              <li parentName=\"ul\">{`Bash: `}<inlineCode parentName=\"li\">{`alias k='kubectl'`}</inlineCode></li>\n              <li parentName=\"ul\">{`Windows PowerShell: `}<inlineCode parentName=\"li\">{`Set-Alias -Name k -Value kubectl`}</inlineCode></li>\n            </ul>\n          </li>\n          <li parentName=\"ul\">{`Set the default namespace:`}\n            <ul parentName=\"li\">\n              <li parentName=\"ul\"><inlineCode parentName=\"li\">{`k config set-context --current --namespace=<name_space>`}</inlineCode></li>\n            </ul>\n          </li>\n        </ul>\n      </li>\n    </ul>\n    <h3>{`Specifying the XML Server Trace Setting`}</h3>\n    <p>{`To enable XML server tracing the out-of-the-box setting needs to be modified as follows:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`Copy the `}<inlineCode parentName=\"li\">{`xmlserver`}</inlineCode>{` pod’s `}<inlineCode parentName=\"li\">{`xmlserverconfig.xml.template`}</inlineCode>{` file to the local file system using the Kubernetes copy command, e.g.\n`}<inlineCode parentName=\"li\">{`k cp <xmlserver-pod-name>:xmlserverconfig.xml.template xmlserverconfig.xml.template -c xmlserver`}</inlineCode></li>\n      <li parentName=\"ul\">{`Edit the local `}<inlineCode parentName=\"li\">{`xmlserverconfig.xml.template`}</inlineCode>{` file to change the `}<inlineCode parentName=\"li\">{`TRACE_TRAFFIC`}</inlineCode>{` value as follows:\n`}<inlineCode parentName=\"li\">{`<TRACE_TRAFFIC>true</TRACE_TRAFFIC>`}</inlineCode></li>\n      <li parentName=\"ul\">{`Delete the existing `}<inlineCode parentName=\"li\">{`releasename-xmlserverconfig-template-cm`}</inlineCode>{` ConfigMap. For example:\n`}<inlineCode parentName=\"li\">{`k delete configmap releasename-xmlserverconfig-template-cm`}</inlineCode></li>\n      <li parentName=\"ul\">{`Create a new `}<inlineCode parentName=\"li\">{`releasename-xmlserverconfig-template-cm`}</inlineCode>{` ConfigMap using the edited copy of `}<inlineCode parentName=\"li\">{`xmlserverconfig.xml.template`}</inlineCode>{`, e.g.\n`}<inlineCode parentName=\"li\">{`k create releasename-xmlserverconfig-template-cm --from-file=xmlserverconfig.xml.template`}</inlineCode>{`\nThe existing `}<inlineCode parentName=\"li\">{`releasename-xmlserverconfig-template-cm`}</inlineCode>{` ConfigMap in the `}<inlineCode parentName=\"li\">{`releasename-xmlserver`}</inlineCode>{` deployment will be replaced with the newly edited file.`}</li>\n      <li parentName=\"ul\">{`The xmlserver pod(s) must be restarted for the new setting to be used. The pod(s) can be restarted using the Kubernetes `}<inlineCode parentName=\"li\">{`delete pod`}</inlineCode>{` command.  For example:\n`}<inlineCode parentName=\"li\">{`k delete pod <xmlserver-pod-name>`}</inlineCode>{`\nThis will terminate the running pod and start a new pod that reflects the new ConfigMap.`}</li>\n    </ul>\n    <h3>{`Modifying the Log4j Properties`}</h3>\n    <p>{`The out-of-the-box `}<inlineCode parentName=\"p\">{`log4j2.properties`}</inlineCode>{` file will write the XML server trace output to stdout, which is routed to the pod’s `}<inlineCode parentName=\"p\">{`tmp/xmlserver.log`}</inlineCode>{` file.\nOptionally, a custom log4j properties file can be provided.\nFor instance, it can be useful to modify the output layout to indicate the time-of-day and the worker thread processing the XML server job.\nFor example, this log4j pattern:`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`appender.A1.layout.pattern=[%p] %d{ABSOLUTE_MICROS} [%t] [%c{1}] %m%n\n`}</code></pre>\n    <p>{`will produce output in this format:`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`[xmlserver] [INFO] 14:01:46,165000 [ThreadPoolWorker-1] [XMLConnectionHandler] - Awaiting job configuration.\n`}</code></pre>\n    <p>{`as compared to the out-of-the-box format:`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`[xmlserver] [INFO] [XMLConnectionHandler] Awaiting job configuration.\n`}</code></pre>\n    <p>{`For more information on specifying log4j patterns see the `}<a parentName=\"p\" {...{\n        \"href\": \"https://logging.apache.org/log4j/2.x/manual/layouts.html\"\n      }}>{`Layouts section`}</a>{` of the `}<a parentName=\"p\" {...{\n        \"href\": \"https://logging.apache.org/log4j/2.x/manual/index.html\"\n      }}>{`log4j documentation`}</a>{`.`}</p>\n    <p>{`To modify the `}<inlineCode parentName=\"p\">{`log4j2.properties`}</inlineCode>{` file:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`Copy the `}<inlineCode parentName=\"li\">{`xmlserver`}</inlineCode>{` pod’s `}<inlineCode parentName=\"li\">{`log4j2.properties`}</inlineCode>{` file to the local file system using the Kubernetes copy command.  For example:\n`}<inlineCode parentName=\"li\">{`k cp <xmlserver-pod-name>:/opt/ibm/Curam/xmlserver/log4j2.properties log4j2.properties -c xmlserver`}</inlineCode></li>\n      <li parentName=\"ul\">{`Edit the local file to specify the desired log4j configuration settings.`}</li>\n      <li parentName=\"ul\">{`Create a ConfigMap using the edited copy of `}<inlineCode parentName=\"li\">{`log4j2.properties`}</inlineCode>{`; for example:\n`}<inlineCode parentName=\"li\">{`k create configmap xmlserver-log4j-props-cm --from-file=log4j2.properties`}</inlineCode></li>\n      <li parentName=\"ul\">{`Edit the xmlserver deployment to specify the new ConfigMap:\n`}<inlineCode parentName=\"li\">{`k edit deployment releasename-xmlserver`}</inlineCode>\n        <ul parentName=\"li\">\n          <li parentName=\"ul\">{`In the subsequent edit session add the entries for the new ConfigMap, matching the name used when creating it; for example:`}</li>\n        </ul>\n      </li>\n    </ul>\n    <pre><code parentName=\"pre\" {...{}}>{`...\n        volumeMounts:\n        ...\n        - mountPath: /opt/ibm/Curam/xmlserver/log4j2.properties\n          name: xmlserver-log4j-props-cm\n          subPath: log4j2.properties\n...\n      volumes:\n      ...\n      - configMap:\n          defaultMode: 420\n          name: xmlserver-log4j-props-cm\n        name: xmlserver-log4j-props-cm\n`}</code></pre>\n    <ul>\n      <li parentName=\"ul\">{`The xmlserver pod(s) must be restarted for it to reflect the new trace setting. The pod can be restarted by using the Kubernetes `}<inlineCode parentName=\"li\">{`delete pod`}</inlineCode>{` command, e.g.\n`}<inlineCode parentName=\"li\">{`k delete pod <xmlserver-pod-name>`}</inlineCode></li>\n    </ul>\n    <p>{`This will terminate the running pod and start a new pod that reflects the new ConfigMap that contains the log4j properties.`}</p>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"names":["_frontmatter","InlineNotification","name","props","console","warn","mdx","layoutProps","MDXLayout","DefaultLayout","MDXContent","_ref","components","_objectWithoutProperties","_excluded","Object","assign","mdxType","parentName","isMDXComponent"],"sourceRoot":""}